name: "Test"
on:
  workflow_dispatch:
    inputs:
      operate_async:
        type: "choice"
        description: "{Boolean} Whether to operate in asynchronously."
        required: false
        default: "False"
        options:
          - "False"
          - "True"
jobs:
  main:
    name: "Main"
    runs-on: "${{matrix.os}}"
    strategy:
      matrix:
        os:
          - "macos-latest"
          - "ubuntu-latest"
          - "windows-latest"
      fail-fast: false
    steps:
      - name: "Optimize Disk Space"
        uses: "hugoalh/disk-space-optimizer-ghaction@main"
        with:
          operate_async: "${{inputs.operate_async}}"
          general_include: ".+"
          aptcache: "True"
          dockerimage_include: ".+"
          dockerimage_exclude: |-
            ^debian:
          homebrewcache: "True"
          npmcache: "True"
          swap: "True"
      - name: "Get Software List"
        run: |
          Get-Command -CommandType Application |
            Format-Table -Property @('Name', 'Path') -AutoSize -Wrap |
            Out-String -Width 120 |
            Write-Host
        shell: "pwsh"
